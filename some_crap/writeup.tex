\documentclass[12pt, letterpaper]{article}

\usepackage{amsmath, enumerate}
\allowdisplaybreaks[1]
%\usepackage[showframe]{geometry}
\usepackage{layout}
\DeclareMathOperator*{\argmin}{argmin}
\DeclareMathOperator*{\argmax}{argmax}
\newcommand{\bv}[1]{\mathbf{#1}}

\title{CS 676\\ Final Project Appendix}

\author{Josh Wheeler, Yotam Barnoy}

\setlength{\voffset}{-0.75in}
\setlength{\headsep}{5pt}
\setlength{\hoffset}{-0.5in}
\setlength{\textwidth}{450pt}

\begin{document}%\layout

\maketitle

This document serves as an appendix to the presentation on the final project. Refer to that document for details.

\section {Derivations of Gradient }

Likelihood of datum m:

exp ( \sum_{t=2}^{T} \sum_{i=1}^{F}  \lambda_i f_i (y_t^m, y_{t-1}^m, x^m) ) / Z_{x^m}

Log Likelihood:
 \sum_{t=2}^{T} \sum_{i=1}^{F}  \lambda_i f_i (y_t^m, y_{t-1}^m, x^m)   -  log Z_{x^m}

d/d \lamba_i  = \sum_{t=2}^{T}  f_i (y_t^m, y_{t-1}^m, x^m) - ((dz/di) / Z)

=  \sum_{t=2}^{T}  f_i (y_t^m, y_{t-1}^m, x^m) - (1 / Z) \sum_{y'} exp ( \sum_{t=2}^{T} \sum_{i=1}^{F}  \lambda_i f_i (y'_t^m, y'_{t-1}^m, x^m) )  \sum_{t=2}^{T}  f_i (y'_t^m, y'_{t-1}^m, x^m)


=  \sum_{t=2}^{T}  f_i (y_t^m, y_{t-1}^m, x^m) -  \sum_{y'} (1 / Z) exp ( \sum_{t=2}^{T} \sum_{i=1}^{F}  \lambda_i f_i (y'_t^m, y'_{t-1}^m, x^m) )  \sum_{t=2}^{T}  f_i (y'_t^m, y'_{t-1}^m, x^m)

=  \sum_{t=2}^{T}  f_i (y_t^m, y_{t-1}^m, x^m) - \sum_{y'} P(y' | x^m) \sum_{t=2}^{T}  f_i (y'_t^m, y'_{t-1}^m, x^m)

=  \sum_{t=2}^{T}  f_i (y_t^m, y_{t-1}^m, x^m) - \sum_{y'} \sum_{t=2}^{T}  P(y' | x^m)  f_i (y'_t^m, y'_{t-1}^m, x^m)

=  \sum_{t=2}^{T}  f_i (y_t^m, y_{t-1}^m, x^m) - \sum_{t=2}^{T} \sum_{y'}   P(y' | x^m)  f_i (y'_t^m, y'_{t-1}^m, x^m)

=  \sum_{t=2}^{T}  f_i (y_t^m, y_{t-1}^m, x^m) -} \sum_{y'}   P(y' | x^m)  f_i (y'_t^m, y'_{t-1}^m, x^m)

Where the term on the right is expected value of f_i with respect to the current model parameters.


\end{document}

